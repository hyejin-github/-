(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[613],{20601:function(e,n,t){"use strict";t(72791);n.Z=t.p+"static/media/noimg.2c17e3ab129feea1ae1b9707c7fb1580.svg"},11093:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var a=t(72791),r=t(80184);function i(e){var n=e.imgfile,t=e.newImgfile,i=e.imgW,c=e.imgH,s=(0,a.useRef)(null),o=new Image,l=URL.createObjectURL(n);return o.src=l,o.onload=function(){var e=s.current,n=null===e||void 0===e?void 0:e.getContext("2d");if(n&&e){e.width=i,e.height=c,n.fillStyle="white",n.fillRect(0,0,i,c),n.drawImage(o,0,0,i,c);var a=e.toDataURL("image/jpeg");t(a),URL.revokeObjectURL(l)}},(0,r.jsx)("div",{id:"resizer",children:(0,r.jsx)("canvas",{ref:s,children:" "})})}var c=a.memo(i)},52619:function(e,n,t){"use strict";t.d(n,{Z:function(){return x}});var a=t(88214),r=t(42982),i=t(15861),c=t(70885),s=t(72791),o=t(66770),l=t.n(o),u=(t(86009),function(e){for(var n=atob(e.split(",")[1]),t=e.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(n.length),r=new Uint8Array(a),i=0;i<n.length;i+=1)r[i]=n.charCodeAt(i);return new Blob([a],{type:t})}),d=t(62902),f=t(74912),m=t.n(f);m().config.update({region:"ap-northeast-2",accessKeyId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_AWS_ACCESS_KEY,secretAccessKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_AWS_SECRET_KEY});var g=function(e){return new(m().S3.ManagedUpload)({params:{Bucket:"gwangjubob",Key:"".concat((0,d.Z)(),".png"),Body:e}}).promise().then((function(e){return e.Location}))},v=function(e){var n=e.split("amazonaws.com/").pop();(new(m().S3)).deleteObject({Bucket:"gwangjubob",Key:n})},p=t(80184);function h(e){var n=e.editorValue,t=e.getValue,o=e.update,f=(0,s.useState)(""),m=(0,c.Z)(f,2),h=m[0],x=m[1],j=(0,s.useState)([""]),b=(0,c.Z)(j,2),w=b[0],S=b[1],Z=(0,s.useRef)(null),_={toolbar:{container:[["image"],[{color:[]},{background:[]}]]}};(0,s.useEffect)((function(){Z.current&&Z.current.getEditor().getModule("toolbar").addHandler("image",(function(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.click(),e.onchange=(0,i.Z)((0,a.Z)().mark((function n(){var t,c,s,o,l,f;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.files&&(t=Z.current,c=t.getEditor().getSelection(!0),s=e.files[0],o=new Image,l=URL.createObjectURL(s),o.src=l,f=document.createElement("canvas"),o.onload=(0,i.Z)((0,a.Z)().mark((function e(){var n,i,s,m;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.getContext("2d"),f.width=400,f.height=400,null===n||void 0===n||n.drawImage(o,0,0,400,400),i=f.toDataURL("image/jpeg"),URL.revokeObjectURL(l),s=new File([u(i)],(0,d.Z)()),e.next=9,g(s);case 9:m=e.sent,S((function(e){return[].concat((0,r.Z)(e),[m])})),t.getEditor().insertEmbed(c.index,"image",m),t.getEditor().setSelection(c.index+1);case 13:case"end":return e.stop()}}),e)}))));case 1:case"end":return n.stop()}}),n)})))}))}),[]),(0,s.useEffect)((function(){if(o){x(o);var e=Z.current,n=e.getEditor().clipboard.convert(o);e.getEditor().setContents(n,"silent")}}),[o]);t&&(w.shift(),w.forEach(function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.includes(n)){e.next=3;break}return e.next=3,v(n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),n(h));return(0,p.jsx)("div",{id:"editor",children:(0,p.jsx)("div",{className:"editor",onPaste:function(e){return function(e){e.preventDefault(),alert("\ubcf5\uc0ac \ubd99\uc5ec\ub123\uae30\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}(e)},children:(0,p.jsx)(l(),{theme:"snow",defaultValue:h,modules:_,formats:["header","background","color","image","width"],ref:Z,onChange:x})})})}var x=s.memo(h)},27594:function(e,n){"use strict";n.Z=["\uc758\ub958","\uc2dd\ud488","\uc8fc\ubc29\uc6a9\ud488","\uc0dd\ud65c\uc6a9\ud488","\ud648\uc778\ud14c\ub9ac\uc5b4","\uac00\uc804\ub514\uc9c0\ud138","\ucde8\ubbf8\uc6a9\ud488","\uae30\ud0c0"]},8443:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return j}});var a=t(88214),r=t(15861),i=t(70885),c=t(72791),s=t(16871),o=t(52619),l=t(20601),u=t(11093),d=t(97198),f=t(81121),m=t(34108),g=t(6183),v=t(39575),p=t(27594),h=t(66579),x=t(80184);var j=function(){var e=(0,c.useState)(null),n=(0,i.Z)(e,2),t=n[0],j=n[1],b=(0,c.useState)(""),w=(0,i.Z)(b,2),S=w[0],Z=w[1],_=(0,c.useState)("\uae30\ud0c0"),E=(0,i.Z)(_,2),N=E[0],R=E[1],C=(0,c.useState)(""),y=(0,i.Z)(C,2),k=y[0],O=y[1],A=(0,c.useState)(!1),T=(0,i.Z)(A,2),U=T[0],L=T[1],I=(0,c.useState)(!1),K=(0,i.Z)(I,2),D=K[0],P=K[1],W=(0,c.useState)(!1),H=(0,i.Z)(W,2),B=H[0],V=H[1],M=(0,c.useRef)(null),F=(0,c.useRef)(null),z=(0,s.s0)(),Y=(0,h.C)((function(e){return e.auth.userInfo}));(0,c.useEffect)((function(){Y?Y&&!Y.area&&z("/join/more"):z("/login")}),[]);var q=(0,c.useCallback)((function(e){Z(e)}),[]),G=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){var t,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={area:"\uad11\uc8fc",state:"\uac70\ub798 \ub300\uae30",category:N,title:null===(t=F.current)||void 0===t?void 0:t.value,content:n,bannerImg:S.replace("data:image/jpeg;base64,","")},e.next=3,(0,f.r2)(r);case 3:i=e.sent,z("/deal/detail/".concat(i.data.data.idx));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,x.jsxs)("div",{id:"deal-edit",children:[(0,x.jsx)("input",{type:"file",accept:"image/*",ref:M,onChange:function(){var e;if(null!==(e=M.current)&&void 0!==e&&e.files){var n=M.current.files[0];n&&(0,d.Z)(n)&&j(n)}}}),t?(0,x.jsx)(u.Z,{imgfile:t,newImgfile:q,imgW:400,imgH:400}):null,(0,x.jsxs)("div",{className:"deal-header ",children:[(0,x.jsx)("div",{className:"deal-header-title notoBold flex justify-between",children:(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{children:"\uafc0"}),"\ub51c",(0,x.jsx)("span",{children:" \uc4f0"}),"\uae30"]})}),(0,x.jsxs)("div",{className:"deal-header-category flex",children:[(0,x.jsx)("p",{className:"category-label notoMid",children:"Category"}),(0,x.jsx)("div",{className:"deal-header-category-box flex",children:p.Z.map((function(e){return(0,x.jsx)("button",{onClick:function(){R(e)},type:"button",className:"notoReg ".concat(N===e&&"button-active"),children:e},(0,v.Z)())}))})]}),(0,x.jsxs)("div",{className:"deal-header-area",children:[(0,x.jsx)("p",{className:"deal-header-area_label notoMid",children:"User Area"}),(0,x.jsxs)("div",{className:"deal-header-area-info flex",children:[(0,x.jsx)("input",{type:"text",readOnly:!0,value:null===Y||void 0===Y?void 0:Y.area,className:"deal-header-area-info_text notoReg"}),(0,x.jsx)("button",{className:"deal-header-area-info_button notoReg",type:"button",onClick:function(){"normal"===(null===Y||void 0===Y?void 0:Y.social)?z("/account"):z("/join/more")},children:"\ubcc0\uacbd"})]}),(0,x.jsxs)("div",{className:"deal-header-area_desc notoReg flex column",children:[(0,x.jsx)("span",{children:"\uc8fc\uc18c\ub294 \ub9c8\uc774\ud398\uc774\uc9c0\uc5d0\uc11c\ub9cc \ubcc0\uacbd \uac00\ub2a5\ud574\uc694."}),(0,x.jsx)("span",{children:"\uc8fc\uc18c\ub294 \uc704\uce58 \ucd94\ucc9c \uc6a9\ub3c4\ub85c\ub9cc \uc0ac\uc6a9\ub429\ub2c8\ub2e4."})]})]}),(0,x.jsxs)("div",{className:"deal-header-preview flex justify-center",children:[(0,x.jsx)("button",{onClick:function(){Z("")},type:"button",className:"deal-close ".concat(!S&&"hide"),children:(0,x.jsx)("img",{src:g.Z,alt:"close"})}),(0,x.jsxs)("button",{onClick:function(){var e;null===(e=M.current)||void 0===e||e.click()},type:"button",className:"deal-header-preview_container flex column justify-center align-center",children:[(0,x.jsx)("p",{className:"deal-header-preview_container-title notoMid",children:"Thumnail"}),(0,x.jsx)("div",{className:"deal-header-preview_img flex justify-center align-center",children:S?(0,x.jsx)("img",{className:"deal-header-preview_img-img",src:S,alt:"preview"}):(0,x.jsx)("img",{className:"deal-header-preview_img-img",src:l.Z,alt:"no-img",title:"preview"})}),(0,x.jsxs)("span",{className:"notoReg",children:[(0,x.jsx)("span",{className:"".concat(U?"err":"hide"),children:"\uafc0\ub51c \uac8c\uc2dc\uae00 \uc378\ub124\uc77c\uc740 \ud544\uc218\uc5d0\uc694."}),(0,x.jsx)("br",{}),"jpg, png, gif, jpeg \ud30c\uc77c\ub9cc \uc9c0\uc6d0\ud574\uc694."]})]})]})]}),(0,x.jsxs)("div",{className:"deal-content flex column align-center",children:[(0,x.jsx)("p",{className:"notoMid",children:"Content"}),(0,x.jsx)("input",{ref:F,className:"deal-title",type:"text",placeholder:"\uc81c\ubaa9\uc740 30\uc790\uae4c\uc9c0 \uc785\ub825\ud560 \uc218 \uc788\uc5b4\uc694."}),k?(0,x.jsx)("span",{className:"notoReg fs-16",children:k}):null,(0,x.jsx)(o.Z,{editorValue:G,getValue:D,update:""})]}),B?(0,x.jsx)("div",{className:"send flex",children:(0,x.jsx)("img",{src:m.Z,className:"loading-spinner",alt:"\ub85c\ub529\uc2a4\ud53c\ub108"})}):(0,x.jsxs)("div",{className:"send flex notoReg",children:[(0,x.jsx)("button",{type:"button",onClick:function(){var e,n,t,a;return null!==(e=F.current)&&void 0!==e&&e.value?F.current.value.length>30?(O("\uc81c\ubaa9\uc740 30\uc790\uae4c\uc9c0\uc5d0\uc694."),void(null===(t=F.current)||void 0===t||t.focus())):S?(V(!0),void P(!0)):(null===(a=M.current)||void 0===a||a.focus(),void L(!0)):(O("\uc81c\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."),void(null===(n=F.current)||void 0===n||n.focus()))},children:"\uc791\uc131"}),(0,x.jsx)("button",{className:"cancle",type:"button",onClick:function(){z("/deal")},children:"\ucde8\uc18c"})]})]})}},97198:function(e,n){"use strict";n.Z=function(e){var n=e.name.substring(e.name.lastIndexOf(".")+1,e.name.length).toLowerCase();return"jpg"===n||"png"===n||"gif"===n||"jpeg"===n||(alert("\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud655\uc7a5\uc790\uc5d0\uc694!"),!1)}},28022:function(){}}]);
//# sourceMappingURL=613.4a46eed6.chunk.js.map