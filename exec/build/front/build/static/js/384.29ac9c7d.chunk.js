(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[384],{20601:function(e,t,n){"use strict";n(72791);t.Z=n.p+"static/media/noimg.2c17e3ab129feea1ae1b9707c7fb1580.svg"},11093:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var a=n(72791),r=n(80184);function i(e){var t=e.imgfile,n=e.newImgfile,i=e.imgW,c=e.imgH,s=(0,a.useRef)(null),l=new Image,o=URL.createObjectURL(t);return l.src=o,l.onload=function(){var e=s.current,t=null===e||void 0===e?void 0:e.getContext("2d");if(t&&e){e.width=i,e.height=c,t.fillStyle="white",t.fillRect(0,0,i,c),t.drawImage(l,0,0,i,c);var a=e.toDataURL("image/jpeg");n(a),URL.revokeObjectURL(o)}},(0,r.jsx)("div",{id:"resizer",children:(0,r.jsx)("canvas",{ref:s,children:" "})})}var c=a.memo(i)},52619:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var a=n(88214),r=n(42982),i=n(15861),c=n(70885),s=n(72791),l=n(66770),o=n.n(l),u=(n(86009),function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(t.length),r=new Uint8Array(a),i=0;i<t.length;i+=1)r[i]=t.charCodeAt(i);return new Blob([a],{type:n})}),d=n(62902),f=n(74912),g=n.n(f);g().config.update({region:"ap-northeast-2",accessKeyId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_AWS_ACCESS_KEY,secretAccessKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_AWS_SECRET_KEY});var m=function(e){return new(g().S3.ManagedUpload)({params:{Bucket:"gwangjubob",Key:"".concat((0,d.Z)(),".png"),Body:e}}).promise().then((function(e){return e.Location}))},v=function(e){var t=e.split("amazonaws.com/").pop();(new(g().S3)).deleteObject({Bucket:"gwangjubob",Key:t})},h=n(80184);function p(e){var t=e.editorValue,n=e.getValue,l=e.update,f=(0,s.useState)(""),g=(0,c.Z)(f,2),p=g[0],x=g[1],j=(0,s.useState)([""]),b=(0,c.Z)(j,2),w=b[0],S=b[1],Z=(0,s.useRef)(null),_={toolbar:{container:[["image"],[{color:[]},{background:[]}]]}};(0,s.useEffect)((function(){Z.current&&Z.current.getEditor().getModule("toolbar").addHandler("image",(function(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.click(),e.onchange=(0,i.Z)((0,a.Z)().mark((function t(){var n,c,s,l,o,f;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.files&&(n=Z.current,c=n.getEditor().getSelection(!0),s=e.files[0],l=new Image,o=URL.createObjectURL(s),l.src=o,f=document.createElement("canvas"),l.onload=(0,i.Z)((0,a.Z)().mark((function e(){var t,i,s,g;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.getContext("2d"),f.width=400,f.height=400,null===t||void 0===t||t.drawImage(l,0,0,400,400),i=f.toDataURL("image/jpeg"),URL.revokeObjectURL(o),s=new File([u(i)],(0,d.Z)()),e.next=9,m(s);case 9:g=e.sent,S((function(e){return[].concat((0,r.Z)(e),[g])})),n.getEditor().insertEmbed(c.index,"image",g),n.getEditor().setSelection(c.index+1);case 13:case"end":return e.stop()}}),e)}))));case 1:case"end":return t.stop()}}),t)})))}))}),[]),(0,s.useEffect)((function(){if(l){x(l);var e=Z.current,t=e.getEditor().clipboard.convert(l);e.getEditor().setContents(t,"silent")}}),[l]);n&&(w.shift(),w.forEach(function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.includes(t)){e.next=3;break}return e.next=3,v(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t(p));return(0,h.jsx)("div",{id:"editor",children:(0,h.jsx)("div",{className:"editor",onPaste:function(e){return function(e){e.preventDefault(),alert("\ubcf5\uc0ac \ubd99\uc5ec\ub123\uae30\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}(e)},children:(0,h.jsx)(o(),{theme:"snow",defaultValue:p,modules:_,formats:["header","background","color","image","width"],ref:Z,onChange:x})})})}var x=s.memo(p)},27594:function(e,t){"use strict";t.Z=["\uc758\ub958","\uc2dd\ud488","\uc8fc\ubc29\uc6a9\ud488","\uc0dd\ud65c\uc6a9\ud488","\ud648\uc778\ud14c\ub9ac\uc5b4","\uac00\uc804\ub514\uc9c0\ud138","\ucde8\ubbf8\uc6a9\ud488","\uae30\ud0c0"]},72561:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var a=n(88214),r=n(15861),i=n(70885),c=n(72791),s=n(16871),l=n(66579),o=n(52619),u=n(20601),d=n(11093),f=n(97198),g=n(81121),m=n(39575),v=n(27594),h=n(34108),p=n(6183),x=n(80184);var j=function(){var e=(0,c.useState)(""),t=(0,i.Z)(e,2),n=t[0],j=t[1],b=(0,c.useState)(null),w=(0,i.Z)(b,2),S=w[0],Z=w[1],_=(0,c.useState)(""),N=(0,i.Z)(_,2),E=N[0],R=N[1],C=(0,c.useState)(""),y=(0,i.Z)(C,2),k=y[0],O=y[1],T=(0,c.useState)(""),A=(0,i.Z)(T,2),U=A[0],L=A[1],I=(0,c.useState)(""),K=(0,i.Z)(I,2),D=K[0],P=K[1],H=(0,c.useState)(!1),W=(0,i.Z)(H,2),B=W[0],V=W[1],F=(0,c.useState)(!1),M=(0,i.Z)(F,2),z=M[0],Y=M[1],q=(0,c.useState)(""),G=(0,i.Z)(q,2),J=G[0],Q=G[1],X=(0,c.useState)(!1),$=(0,i.Z)(X,2),ee=$[0],te=$[1],ne=(0,c.useRef)(null),ae=(0,c.useRef)(null),re=(0,s.s0)(),ie=(0,s.TH)(),ce=(0,l.C)((function(e){return e.auth.userInfo}));if(!ie.state)return alert("\ube44\uc815\uc0c1\uc801\uc778 \uc811\uadfc\uc785\ub2c8\ub2e4."),(0,x.jsx)(s.Fg,{to:"/deal"});(0,c.useEffect)((function(){var e=ie.state;e.bannerImg&&R("data:image/jpeg;base64,".concat(e.bannerImg)),O(e.category),L(e.title),Q(e.content),j(e.state)}),[]);var se,le=(0,s.UO)().id,oe=(0,c.useCallback)((function(e){R(e)}),[]),ue=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={area:"\uad11\uc8fc",state:n,category:k,title:null===(r=ae.current)||void 0===r?void 0:r.value,content:t,bannerImg:E.replace("data:image/jpeg;base64,","")},e.next=3,(0,g.hi)(i,le);case 3:500===e.sent.status&&(alert("\uae00\uc774 \ub108\ubb34 \uae38\uc5b4\uc694 \u3160\u3160"),te(!1)),re("/deal/detail/".concat(le));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,x.jsxs)("div",{id:"deal-edit",children:[(0,x.jsx)("input",{type:"file",accept:"image/*",ref:ne,onChange:function(){var e;if(null!==(e=ne.current)&&void 0!==e&&e.files){var t=ne.current.files[0];t&&(0,f.Z)(t)&&Z(t)}}}),S?(0,x.jsx)(d.Z,{imgfile:S,newImgfile:oe,imgW:400,imgH:400}):null,(0,x.jsxs)("div",{className:"deal-header ",children:[(0,x.jsxs)("div",{className:"deal-header-title notoBold flex",children:[(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{children:"\uafc0"}),"\ub51c",(0,x.jsx)("span",{children:" \uc4f0"}),"\uae30"]}),(0,x.jsx)("div",{className:"deal-header-select",children:(0,x.jsxs)("select",{className:"deal-header-select__select notoReg ".concat((se=n,"\uac70\ub798 \ub300\uae30"===se?"green":"\uac70\ub798 \uc9c4\ud589"===se?"yellow":"brown")),onChange:function(e){!function(e){j(e.target.value)}(e)},value:n,children:[(0,x.jsx)("option",{value:"\uac70\ub798 \ub300\uae30",children:"\uac70\ub798 \ub300\uae30"}),(0,x.jsx)("option",{value:"\uac70\ub798 \uc9c4\ud589",children:"\uac70\ub798 \uc9c4\ud589"}),(0,x.jsx)("option",{value:"\uac70\ub798 \uc644\ub8cc",children:"\uac70\ub798 \uc644\ub8cc"})]})})]}),(0,x.jsxs)("div",{className:"deal-header-category flex",children:[(0,x.jsx)("p",{className:"category-label notoMid",children:"Category"}),(0,x.jsx)("div",{className:"deal-header-category-box flex",children:v.Z.map((function(e){return(0,x.jsx)("button",{onClick:function(){O(e)},type:"button",className:"notoReg ".concat(k===e&&"button-active"),children:e},(0,m.Z)())}))})]}),(0,x.jsxs)("div",{className:"deal-header-area",children:[(0,x.jsx)("p",{className:"deal-header-area_label notoMid",children:"User Area"}),(0,x.jsxs)("div",{className:"deal-header-area-info flex",children:[(0,x.jsx)("input",{type:"text",readOnly:!0,value:null===ce||void 0===ce?void 0:ce.area,className:"deal-header-area-info_text notoReg"}),(0,x.jsx)("button",{className:"deal-header-area-info_button notoReg",type:"button",onClick:function(){"normal"===(null===ce||void 0===ce?void 0:ce.social)?re("/account"):re("/join/more")},children:"\ubcc0\uacbd"})]}),(0,x.jsxs)("div",{className:"deal-header-area_desc notoReg flex column",children:[(0,x.jsx)("span",{children:"\uc8fc\uc18c\ub294 \ub9c8\uc774\ud398\uc774\uc9c0\uc5d0\uc11c\ub9cc \ubcc0\uacbd \uac00\ub2a5\ud574\uc694."}),(0,x.jsx)("span",{children:"\uc8fc\uc18c\ub294 \uc704\uce58 \ucd94\ucc9c \uc6a9\ub3c4\ub85c\ub9cc \uc0ac\uc6a9\ub429\ub2c8\ub2e4."})]})]}),(0,x.jsxs)("div",{className:"deal-header-preview flex justify-center",children:[(0,x.jsx)("button",{onClick:function(){R("")},type:"button",className:"deal-close ".concat(!E&&"hide"),children:(0,x.jsx)("img",{src:p.Z,alt:"close"})}),(0,x.jsxs)("button",{onClick:function(){var e;null===(e=ne.current)||void 0===e||e.click()},type:"button",className:"deal-header-preview_container flex column justify-center align-center",children:[(0,x.jsx)("p",{className:"deal-header-preview_container-title notoMid",children:"Thumnail"}),(0,x.jsx)("div",{className:"deal-header-preview_img flex justify-center align-center",children:E?(0,x.jsx)("img",{src:E,alt:"preview",className:"deal-header-preview_img-img"}):(0,x.jsx)("img",{src:u.Z,alt:"no-img",title:"preview",className:"deal-header-preview_img-img"})}),(0,x.jsxs)("span",{className:"notoReg",children:[(0,x.jsx)("span",{className:"".concat(z?"err":"hide"),children:"\uafc0\ub51c \uac8c\uc2dc\uae00 \uc378\ub124\uc77c\uc740 \ud544\uc218\uc5d0\uc694."}),(0,x.jsx)("br",{}),"jpg, png, gif, jpeg \ud30c\uc77c\ub9cc \uc9c0\uc6d0\ud574\uc694."]})]})]})]}),(0,x.jsxs)("div",{className:"deal-content flex column align-center",children:[(0,x.jsx)("p",{className:"notoMid",children:"Content"}),(0,x.jsx)("input",{ref:ae,className:"deal-title",type:"text",placeholder:"\uc81c\ubaa9\uc740 30\uc790\uae4c\uc9c0 \uc785\ub825\ud560 \uc218 \uc788\uc5b4\uc694.",defaultValue:U}),D?(0,x.jsx)("span",{className:"notoReg fs-16",children:D}):null,(0,x.jsx)(o.Z,{editorValue:ue,getValue:B,update:J})]}),ee?(0,x.jsx)("div",{className:"send flex",children:(0,x.jsx)("img",{src:h.Z,className:"loading-spinner",alt:"\ub85c\ub529\uc2a4\ud53c\ub108"})}):(0,x.jsxs)("div",{className:"send flex notoReg",children:[(0,x.jsx)("button",{type:"button",onClick:function(){var e,t,n,a;return null!==(e=ae.current)&&void 0!==e&&e.value?ae.current.value.length>30?(P("\uc81c\ubaa9\uc740 30\uc790\uae4c\uc9c0\uc5d0\uc694."),void(null===(n=ae.current)||void 0===n||n.focus())):E?(te(!0),void V(!0)):(null===(a=ne.current)||void 0===a||a.focus(),void Y(!0)):(P("\uc81c\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."),void(null===(t=ae.current)||void 0===t||t.focus()))},children:"\uc791\uc131"}),(0,x.jsx)("button",{className:"cancle",type:"button",onClick:function(){re("/deal/detail/".concat(le))},children:"\ucde8\uc18c"})]})]})}},97198:function(e,t){"use strict";t.Z=function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1,e.name.length).toLowerCase();return"jpg"===t||"png"===t||"gif"===t||"jpeg"===t||(alert("\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud655\uc7a5\uc790\uc5d0\uc694!"),!1)}},28022:function(){}}]);
//# sourceMappingURL=384.29ac9c7d.chunk.js.map