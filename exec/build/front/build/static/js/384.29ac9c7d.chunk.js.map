{"version":3,"file":"static/js/384.29ac9c7d.chunk.js","mappings":"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","sources":["assets/images/noimg.svg","components/common/ImgUploader/ImgResizer.tsx","utils/resizer.ts","components/common/s3Uploader/awsS3.ts","components/common/s3Uploader/Editor.tsx","constants/dealCategory.ts","screens/DealPage/DealUpdate.tsx","utils/isImage.ts"],"sourcesContent":["var _defs;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgNoimg(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 256,\n    height: 256,\n    viewBox: \"0 0 256 256\",\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null)), /*#__PURE__*/React.createElement(\"g\", {\n    style: {\n      stroke: \"none\",\n      strokeWidth: 0,\n      strokeDasharray: \"none\",\n      strokeLinecap: \"butt\",\n      strokeLinejoin: \"miter\",\n      strokeMiterlimit: 10,\n      fill: \"none\",\n      fillRule: \"nonzero\",\n      opacity: 1\n    },\n    transform: \"translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 87 19.986 c -1.657 0 -3 1.343 -3 3 v 44.027 c 0 0.999 -0.295 1.924 -0.781 2.72 L 63.005 49.021 c -1.111 -1.137 -2.916 -1.213 -4.116 -0.168 L 45.173 60.779 l -1.383 -1.422 c -1.155 -1.188 -3.054 -1.215 -4.242 -0.059 c -1.188 1.154 -1.214 3.054 -0.06 4.242 l 3.361 3.456 c 1.11 1.142 2.919 1.218 4.12 0.172 l 13.72 -11.93 l 16.619 17.029 H 25.623 c -1.657 0 -3 1.343 -3 3 s 1.343 3 3 3 h 53.122 c 2.188 0 4.226 -0.638 5.955 -1.722 c 0.047 -0.028 0.094 -0.054 0.14 -0.085 C 87.94 74.454 90 70.973 90 67.014 V 22.986 C 90 21.33 88.657 19.986 87 19.986 z\",\n    style: {\n      stroke: \"none\",\n      strokeWidth: 1,\n      strokeDasharray: \"none\",\n      strokeLinecap: \"butt\",\n      strokeLinejoin: \"miter\",\n      strokeMiterlimit: 10,\n      fill: \"rgb(173,173,173)\",\n      fillRule: \"nonzero\",\n      opacity: 1\n    },\n    transform: \" matrix(1 0 0 1 0 0) \",\n    strokeLinecap: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 89.233 5.323 c -1.106 -1.232 -3.004 -1.336 -4.236 -0.23 l -7.401 6.638 H 11.255 C 5.049 11.731 0 16.78 0 22.986 v 44.027 c 0 4.027 2.133 7.557 5.323 9.546 l -4.326 3.88 c -1.233 1.106 -1.336 3.003 -0.23 4.236 c 0.593 0.661 1.412 0.997 2.234 0.997 c 0.713 0 1.429 -0.253 2.002 -0.767 l 84 -75.348 C 90.236 8.453 90.34 6.556 89.233 5.323 z M 11.255 17.731 h 59.652 L 34.802 50.117 l -8.927 -9.179 c -1.124 -1.155 -2.958 -1.217 -4.155 -0.14 L 6 54.923 V 22.986 C 6 20.088 8.357 17.731 11.255 17.731 z M 6 67.014 v -4.025 l 17.584 -15.8 l 6.748 6.938 L 10.223 72.164 C 7.818 71.683 6 69.558 6 67.014 z\",\n    style: {\n      stroke: \"none\",\n      strokeWidth: 1,\n      strokeDasharray: \"none\",\n      strokeLinecap: \"butt\",\n      strokeLinejoin: \"miter\",\n      strokeMiterlimit: 10,\n      fill: \"rgb(173,173,173)\",\n      fillRule: \"nonzero\",\n      opacity: 1\n    },\n    transform: \" matrix(1 0 0 1 0 0) \",\n    strokeLinecap: \"round\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 33.167,\n    cy: 29.037,\n    r: 6.047,\n    style: {\n      stroke: \"none\",\n      strokeWidth: 1,\n      strokeDasharray: \"none\",\n      strokeLinecap: \"butt\",\n      strokeLinejoin: \"miter\",\n      strokeMiterlimit: 10,\n      fill: \"rgb(173,173,173)\",\n      fillRule: \"nonzero\",\n      opacity: 1\n    },\n    transform: \"  matrix(1 0 0 1 0 0) \"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgNoimg);\nexport default __webpack_public_path__ + \"static/media/noimg.2c17e3ab129feea1ae1b9707c7fb1580.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useRef } from \"react\";\r\nimport \"./ImgResizer.scss\";\r\n\r\ninterface ImgResizerProps {\r\n  imgfile: File;\r\n  newImgfile: any;\r\n  imgW: number;\r\n  imgH: number;\r\n}\r\nfunction ImgResizer({ imgfile, newImgfile, imgW, imgH }: ImgResizerProps) {\r\n  const canvasRef = useRef<any>(null);\r\n\r\n  const newImg = new Image();\r\n  const imgUrl = URL.createObjectURL(imgfile);\r\n  newImg.src = imgUrl;\r\n  newImg.onload = () => {\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas?.getContext(\"2d\");\r\n    if (ctx && canvas) {\r\n      canvas.width = imgW;\r\n      canvas.height = imgH;\r\n      ctx.fillStyle = \"white\";\r\n      ctx.fillRect(0, 0, imgW, imgH);\r\n      ctx.drawImage(newImg, 0, 0, imgW, imgH);\r\n      const dataUrl = canvas.toDataURL(\"image/jpeg\");\r\n      newImgfile(dataUrl);\r\n      URL.revokeObjectURL(imgUrl);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div id=\"resizer\">\r\n      <canvas ref={canvasRef}> </canvas>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(ImgResizer);\r\n","export const dataurlToBlob = (url: string) => {\r\n  const byteString = atob(url.split(\",\")[1]);\r\n  const mimeString = url.split(\",\")[0].split(\":\")[1].split(\";\")[0];\r\n  const ab = new ArrayBuffer(byteString.length);\r\n  const ia = new Uint8Array(ab);\r\n  for (let i = 0; i < byteString.length; i += 1) {\r\n    ia[i] = byteString.charCodeAt(i);\r\n  }\r\n  return new Blob([ab], { type: mimeString });\r\n};\r\n\r\nexport default {};\r\n","import AWS from \"aws-sdk\";\r\nimport { v1 } from \"uuid\";\r\n\r\nAWS.config.update({\r\n  region: \"ap-northeast-2\",\r\n  accessKeyId: process.env.REACT_APP_AWS_ACCESS_KEY,\r\n  secretAccessKey: process.env.REACT_APP_AWS_SECRET_KEY\r\n});\r\n\r\nexport const uploadFile = (file: File) => {\r\n  const upload = new AWS.S3.ManagedUpload({\r\n    params: {\r\n      Bucket: \"gwangjubob\",\r\n      Key: `${v1()}.png`,\r\n      Body: file\r\n    }\r\n  });\r\n  const promise = upload.promise();\r\n\r\n  return promise.then(res => {\r\n    return res.Location;\r\n  });\r\n};\r\n\r\nexport const deleteFile = (url: string) => {\r\n  const fileUrl = url.split(\"amazonaws.com/\").pop();\r\n  const del = new AWS.S3();\r\n  del.deleteObject(\r\n    {\r\n      Bucket: \"gwangjubob\",\r\n      Key: fileUrl as string\r\n    }\r\n    // function (err, data) {\r\n    // if (err) console.log(err, ㄴerr.stack);\r\n    // else console.log(data);\r\n    // }\r\n  );\r\n};\r\n\r\nexport default {};\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport ReactQuill from \"react-quill\";\r\nimport \"react-quill/dist/quill.snow.css\";\r\nimport { dataurlToBlob } from \"@utils/resizer\";\r\nimport { v1 } from \"uuid\";\r\nimport { deleteFile, uploadFile } from \"./awsS3\";\r\nimport \"./Editor.scss\";\r\n\r\ninterface EditorProps {\r\n  editorValue: (value: string) => void;\r\n  getValue: boolean;\r\n  update: string;\r\n}\r\n\r\nfunction Editor({ editorValue, getValue, update }: EditorProps) {\r\n  const [value, setValue] = useState(\"\");\r\n  const [tmpImg, setTmpImg] = useState([\"\"]);\r\n\r\n  // 에디터 커스텀\r\n  const quillRef = useRef<any>(null);\r\n  const toolbarOptions = [[\"image\"], [{ color: [] }, { background: [] }]];\r\n  const modules = {\r\n    toolbar: {\r\n      container: toolbarOptions\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    // 에디터 이미지 첨부 시 커스텀 이미지핸들러 실행\r\n\r\n    const handleImage = () => {\r\n      // 인풋 만들어서 업로드\r\n      const input = document.createElement(\"input\");\r\n      input.setAttribute(\"type\", \"file\");\r\n      input.setAttribute(\"accept\", \"image/*\");\r\n      input.click();\r\n      input.onchange = async () => {\r\n        if (input.files) {\r\n          const quill = quillRef.current;\r\n          const range = quill.getEditor().getSelection(true);\r\n          const file = input.files[0];\r\n          const newImg = new Image();\r\n          const imgUrl = URL.createObjectURL(file);\r\n          newImg.src = imgUrl;\r\n\r\n          // 캔버스에 그리면서 리사이징, 컴포넌트로 사용하던거랑 조금 달라서 따로 구현\r\n          const canvas = document.createElement(\"canvas\");\r\n          newImg.onload = async () => {\r\n            const ctx = canvas.getContext(\"2d\");\r\n            canvas.width = 400;\r\n            canvas.height = 400;\r\n            ctx?.drawImage(newImg, 0, 0, 400, 400);\r\n            const dataUrl = canvas.toDataURL(\"image/jpeg\");\r\n            URL.revokeObjectURL(imgUrl);\r\n\r\n            // 캔버스로 그리면 dataurl 생성, 생성 된 dataurl > Blob > File 순으로 변경\r\n            const newFile = new File([dataurlToBlob(dataUrl)], v1());\r\n            const url = await uploadFile(newFile);\r\n            setTmpImg(cur => [...cur, url]);\r\n            quill.getEditor().insertEmbed(range.index, \"image\", url);\r\n            quill.getEditor().setSelection(range.index + 1);\r\n          };\r\n        }\r\n      };\r\n    };\r\n\r\n    if (quillRef.current) {\r\n      const toolbar = quillRef.current.getEditor().getModule(\"toolbar\");\r\n      toolbar.addHandler(\"image\", handleImage);\r\n    }\r\n  }, []);\r\n\r\n  // update 프롭스가 전달되면 디폴트값 설정\r\n  useEffect(() => {\r\n    if (update) {\r\n      setValue(update);\r\n      const quill = quillRef.current;\r\n      const delta = quill.getEditor().clipboard.convert(update);\r\n      quill.getEditor().setContents(delta, \"silent\");\r\n    }\r\n  }, [update]);\r\n\r\n  const formats = [\"header\", \"background\", \"color\", \"image\", \"width\"];\r\n\r\n  if (getValue) {\r\n    tmpImg.shift();\r\n    tmpImg.forEach(async item => {\r\n      if (!value.includes(item)) {\r\n        await deleteFile(item);\r\n      }\r\n    });\r\n    editorValue(value);\r\n  }\r\n\r\n  const isPaste = (e: React.ClipboardEvent<HTMLDivElement>) => {\r\n    e.preventDefault();\r\n    alert(\"복사 붙여넣기는 지원하지 않습니다.\");\r\n  };\r\n\r\n  return (\r\n    <div id=\"editor\">\r\n      <div className=\"editor\" onPaste={e => isPaste(e)}>\r\n        <ReactQuill\r\n          theme=\"snow\"\r\n          defaultValue={value}\r\n          modules={modules}\r\n          formats={formats}\r\n          ref={quillRef}\r\n          onChange={setValue}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(Editor);\r\n","const dealCategory = [\r\n  \"의류\",\r\n  \"식품\",\r\n  \"주방용품\",\r\n  \"생활용품\",\r\n  \"홈인테리어\",\r\n  \"가전디지털\",\r\n  \"취미용품\",\r\n  \"기타\"\r\n];\r\n\r\nexport default dealCategory;\r\n","import React, { useState, useCallback, useRef, useEffect } from \"react\";\r\nimport {\r\n  useNavigate,\r\n  useLocation,\r\n  useParams,\r\n  Navigate\r\n} from \"react-router-dom\";\r\nimport { useAppSelector } from \"@store/hooks\";\r\nimport Editor from \"@components/common/s3Uploader/Editor\";\r\nimport \"./DealUpdate.scss\";\r\nimport noimg from \"@images/noimg.svg\";\r\nimport ImgResizer from \"@components/common/ImgUploader/ImgResizer\";\r\nimport isImage from \"@utils/isImage\";\r\nimport { dealArticle, dealUpdate } from \"@apis/honeyDeal\";\r\nimport { v4 } from \"uuid\";\r\nimport dealCategory from \"@constants/dealCategory\";\r\nimport LoadingSpinner from \"@images/LoadingSpinner.svg\";\r\nimport X from \"@images/X.svg\";\r\n\r\nfunction DealUpdate() {\r\n  const [dealState, setDealState] = useState(\"\");\r\n  const [sendFile, setSendFile] = useState<File | null>(null);\r\n  const [thumnail, setThumnail] = useState(\"\");\r\n  const [category, setCategory] = useState(\"\");\r\n  const [title, setTitle] = useState(\"\");\r\n  const [errMsg, setErrMsg] = useState(\"\");\r\n  const [chk, setChk] = useState(false);\r\n  const [tumErr, setTumErr] = useState(false);\r\n  const [updateData, setUpdateData] = useState(\"\");\r\n  const [spinner, setSpinner] = useState(false);\r\n  const imgInput = useRef<HTMLInputElement>(null);\r\n  const titleRef = useRef<HTMLInputElement>(null);\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const userInfo = useAppSelector(state => state.auth.userInfo);\r\n\r\n  if (!location.state) {\r\n    alert(\"비정상적인 접근입니다.\");\r\n    return <Navigate to=\"/deal\" />;\r\n  }\r\n\r\n  useEffect(() => {\r\n    const articleInfo = location.state as dealArticle;\r\n    if (articleInfo.bannerImg) {\r\n      setThumnail(`data:image/jpeg;base64,${articleInfo.bannerImg}`);\r\n    }\r\n    setCategory(articleInfo.category);\r\n    setTitle(articleInfo.title);\r\n    setUpdateData(articleInfo.content);\r\n    setDealState(articleInfo.state);\r\n  }, []);\r\n\r\n  const { id } = useParams();\r\n\r\n  const back = () => {\r\n    navigate(`/deal/detail/${id}`);\r\n  };\r\n\r\n  const changeDealState = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    setDealState(e.target.value);\r\n  };\r\n\r\n  const changeColor = (state: string) => {\r\n    if (state === \"거래 대기\") {\r\n      return \"green\";\r\n    }\r\n    if (state === \"거래 진행\") {\r\n      return \"yellow\";\r\n    }\r\n    return \"brown\";\r\n  };\r\n\r\n  // 썸네일 인풋태그열기 > 파일내리기 > 파일 받기\r\n  const clickInput = () => {\r\n    imgInput.current?.click();\r\n  };\r\n\r\n  const fileread = () => {\r\n    if (imgInput.current?.files) {\r\n      const file = imgInput.current.files[0];\r\n\r\n      if (file && isImage(file)) {\r\n        setSendFile(file);\r\n      }\r\n    }\r\n  };\r\n\r\n  const receiveFile = useCallback((data: string) => {\r\n    setThumnail(data);\r\n  }, []);\r\n\r\n  // 카테고리 변경\r\n  const changeCategory = (cate: string) => {\r\n    setCategory(cate);\r\n  };\r\n\r\n  // 유효성 검사\r\n  const chkForm = () => {\r\n    if (!titleRef.current?.value) {\r\n      setErrMsg(\"제목을 입력해주세요.\");\r\n      titleRef.current?.focus();\r\n      return;\r\n    }\r\n    if (titleRef.current.value.length > 30) {\r\n      setErrMsg(\"제목은 30자까지에요.\");\r\n      titleRef.current?.focus();\r\n      return;\r\n    }\r\n    if (!thumnail) {\r\n      imgInput.current?.focus();\r\n      setTumErr(true);\r\n      return;\r\n    }\r\n    setSpinner(true);\r\n    setChk(true);\r\n  };\r\n\r\n  // 검사 > 에디터에서 밸류 받기 > DB 전송\r\n  const receiveValue = async (data: string) => {\r\n    const payload = {\r\n      area: \"광주\",\r\n      state: dealState,\r\n      category,\r\n      title: titleRef.current?.value as string,\r\n      content: data,\r\n      bannerImg: thumnail.replace(\"data:image/jpeg;base64,\", \"\")\r\n    };\r\n    const res = await dealUpdate(payload, id as string);\r\n    if (res.status === 500) {\r\n      alert(\"글이 너무 길어요 ㅠㅠ\");\r\n      setSpinner(false);\r\n    }\r\n    navigate(`/deal/detail/${id}`);\r\n  };\r\n\r\n  return (\r\n    <div id=\"deal-edit\">\r\n      <input type=\"file\" accept=\"image/*\" ref={imgInput} onChange={fileread} />\r\n      {sendFile ? (\r\n        <ImgResizer\r\n          imgfile={sendFile}\r\n          newImgfile={receiveFile}\r\n          imgW={400}\r\n          imgH={400}\r\n        />\r\n      ) : null}\r\n      <div className=\"deal-header \">\r\n        <div className=\"deal-header-title notoBold flex\">\r\n          <p>\r\n            <span>꿀</span>딜<span> 쓰</span>기\r\n          </p>\r\n          <div className=\"deal-header-select\">\r\n            <select\r\n              className={`deal-header-select__select notoReg ${changeColor(\r\n                dealState\r\n              )}`}\r\n              onChange={e => {\r\n                changeDealState(e);\r\n              }}\r\n              value={dealState}\r\n            >\r\n              <option value=\"거래 대기\">거래 대기</option>\r\n              <option value=\"거래 진행\">거래 진행</option>\r\n              <option value=\"거래 완료\">거래 완료</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div className=\"deal-header-category flex\">\r\n          <p className=\"category-label notoMid\">Category</p>\r\n          <div className=\"deal-header-category-box flex\">\r\n            {dealCategory.map(item => {\r\n              return (\r\n                <button\r\n                  onClick={() => {\r\n                    changeCategory(item);\r\n                  }}\r\n                  type=\"button\"\r\n                  key={v4()}\r\n                  className={`notoReg ${category === item && \"button-active\"}`}\r\n                >\r\n                  {item}\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n        <div className=\"deal-header-area\">\r\n          <p className=\"deal-header-area_label notoMid\">User Area</p>\r\n          <div className=\"deal-header-area-info flex\">\r\n            <input\r\n              type=\"text\"\r\n              readOnly\r\n              value={userInfo?.area as string}\r\n              className=\"deal-header-area-info_text notoReg\"\r\n            />\r\n\r\n            <button\r\n              className=\"deal-header-area-info_button notoReg\"\r\n              type=\"button\"\r\n              onClick={() => {\r\n                if (userInfo?.social === \"normal\") {\r\n                  navigate(\"/account\");\r\n                } else {\r\n                  navigate(\"/join/more\");\r\n                }\r\n              }}\r\n            >\r\n              변경\r\n            </button>\r\n          </div>\r\n          <div className=\"deal-header-area_desc notoReg flex column\">\r\n            <span>주소는 마이페이지에서만 변경 가능해요.</span>\r\n            <span>주소는 위치 추천 용도로만 사용됩니다.</span>\r\n          </div>\r\n        </div>\r\n        <div className=\"deal-header-preview flex justify-center\">\r\n          <button\r\n            onClick={() => {\r\n              setThumnail(\"\");\r\n            }}\r\n            type=\"button\"\r\n            className={`deal-close ${!thumnail && \"hide\"}`}\r\n          >\r\n            <img src={X} alt=\"close\" />\r\n          </button>\r\n          <button\r\n            onClick={clickInput}\r\n            type=\"button\"\r\n            className=\"deal-header-preview_container flex column justify-center align-center\"\r\n          >\r\n            <p className=\"deal-header-preview_container-title notoMid\">\r\n              Thumnail\r\n            </p>\r\n            <div className=\"deal-header-preview_img flex justify-center align-center\">\r\n              {thumnail ? (\r\n                <img\r\n                  src={thumnail}\r\n                  alt=\"preview\"\r\n                  className=\"deal-header-preview_img-img\"\r\n                />\r\n              ) : (\r\n                <img\r\n                  src={noimg}\r\n                  alt=\"no-img\"\r\n                  title=\"preview\"\r\n                  className=\"deal-header-preview_img-img\"\r\n                />\r\n              )}\r\n            </div>\r\n            <span className=\"notoReg\">\r\n              <span className={`${tumErr ? \"err\" : \"hide\"}`}>\r\n                꿀딜 게시글 썸네일은 필수에요.\r\n              </span>\r\n              <br />\r\n              jpg, png, gif, jpeg 파일만 지원해요.\r\n            </span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div className=\"deal-content flex column align-center\">\r\n        <p className=\"notoMid\">Content</p>\r\n        <input\r\n          ref={titleRef}\r\n          className=\"deal-title\"\r\n          type=\"text\"\r\n          placeholder=\"제목은 30자까지 입력할 수 있어요.\"\r\n          defaultValue={title}\r\n        />\r\n        {errMsg ? <span className=\"notoReg fs-16\">{errMsg}</span> : null}\r\n\r\n        <Editor editorValue={receiveValue} getValue={chk} update={updateData} />\r\n      </div>\r\n      {spinner ? (\r\n        <div className=\"send flex\">\r\n          <img\r\n            src={LoadingSpinner}\r\n            className=\"loading-spinner\"\r\n            alt=\"로딩스피너\"\r\n          />\r\n        </div>\r\n      ) : (\r\n        <div className=\"send flex notoReg\">\r\n          <button type=\"button\" onClick={chkForm}>\r\n            작성\r\n          </button>\r\n          <button className=\"cancle\" type=\"button\" onClick={back}>\r\n            취소\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DealUpdate;\r\n","const isImage = (file: File) => {\r\n  const fileExt = file.name\r\n    .substring(file.name.lastIndexOf(\".\") + 1, file.name.length)\r\n    .toLowerCase();\r\n  if (\r\n    fileExt !== \"jpg\" &&\r\n    fileExt !== \"png\" &&\r\n    fileExt !== \"gif\" &&\r\n    fileExt !== \"jpeg\"\r\n  ) {\r\n    alert(\"지원하지 않는 확장자에요!\");\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nexport default isImage;\r\n"],"names":["ImgResizer","imgfile","newImgfile","imgW","imgH","canvasRef","useRef","newImg","Image","imgUrl","URL","createObjectURL","src","onload","canvas","current","ctx","getContext","width","height","fillStyle","fillRect","drawImage","dataUrl","toDataURL","revokeObjectURL","id","ref","React","dataurlToBlob","url","byteString","atob","split","mimeString","ab","ArrayBuffer","length","ia","Uint8Array","i","charCodeAt","Blob","type","AWS","region","accessKeyId","process","REACT_APP_AWS_ACCESS_KEY","secretAccessKey","REACT_APP_AWS_SECRET_KEY","uploadFile","file","params","Bucket","Key","v1","Body","promise","then","res","Location","deleteFile","fileUrl","pop","deleteObject","Editor","editorValue","getValue","update","useState","value","setValue","tmpImg","setTmpImg","quillRef","modules","toolbar","container","color","background","useEffect","getEditor","getModule","addHandler","input","document","createElement","setAttribute","click","onchange","files","quill","range","getSelection","newFile","File","cur","insertEmbed","index","setSelection","delta","clipboard","convert","setContents","shift","forEach","item","includes","className","onPaste","e","preventDefault","alert","isPaste","theme","defaultValue","formats","onChange","dealState","setDealState","sendFile","setSendFile","thumnail","setThumnail","category","setCategory","title","setTitle","errMsg","setErrMsg","chk","setChk","tumErr","setTumErr","updateData","setUpdateData","spinner","setSpinner","imgInput","titleRef","navigate","useNavigate","location","useLocation","userInfo","useAppSelector","state","auth","to","articleInfo","bannerImg","content","useParams","receiveFile","useCallback","data","receiveValue","payload","area","replace","dealUpdate","status","accept","isImage","target","changeDealState","dealCategory","onClick","v4","readOnly","social","X","alt","noimg","placeholder","LoadingSpinner","focus","fileExt","name","substring","lastIndexOf","toLowerCase"],"sourceRoot":""}